from django.db import models
from django.contrib.auth.models import User
from datetime import date
from django.urls import reverse

# Create your models here.

class pnCategory(models.Model):
	category = models.CharField(max_length = 10)
	user = models.ForeignKey(User, on_delete = models.SET_NULL, null = True, blank=True)
	date = models.DateField(null = True, blank = True)
	def __str__(self):
		return self.category

class partNumber(models.Model):
	Pid = models.AutoField(primary_key=True)
	name = models.CharField(max_length = 80, help_text='check partNumber rule for detail')
	location = models.CharField(max_length = 15, blank = True, null =True)
	category = models.CharField(max_length = 10)
	level = models.PositiveIntegerField(default = 0)
	discription = models.TextField(help_text='must input key paramter discription here', null=True, blank = True)
	buylink = models.CharField(max_length = 200, help_text ='input the purchasing link', blank = True)
	date = models.DateField(null = True, blank = True) 
	user = models.ForeignKey(User, on_delete = models.SET_NULL, null = True, blank=True )
	def __str__(self):
		return self.name

class BomElement(models.Model):
	product = models.ForeignKey(partNumber, on_delete = models.CASCADE, blank = True, null =True) #bom belongs to what product
	Pid = models.IntegerField(default= -1) # what partNumber it used
	partPN = models.CharField(max_length = 80, default ="none") # show the name of Pid indicate
	unitQty = models.IntegerField(default =1)
	schPN = models.CharField(max_length = 1000, blank=True, null= True)
	user = models.ForeignKey(User, on_delete = models.SET_NULL, null= True, blank = True)
	date = models.DateField(null=True, blank = True )
	def __str__(self):
		return self.partPN

class partNote(models.Model):
	part = models.ForeignKey(partNumber, on_delete= models.CASCADE, blank=True, null=True)
	value = models.CharField(max_length = 15, blank = True, null = True)
	package = models.CharField(max_length = 15, blank = True, null = True)
	param1 = models.CharField(max_length = 15, blank = True, null = True)
	param2 = models.CharField(max_length = 15, blank = True, null = True)
	def __str__(self):
		return self.partNumber.name

class elePrice(models.Model):
	partNumber = models.ForeignKey(partNumber, on_delete = models.CASCADE, blank = True, null =True)
	price = models.DecimalField(max_digits = 6, decimal_places =2 )
	user = models.ForeignKey(User, on_delete = models.SET_NULL, null= True, blank = True)
	date = models.DateField(null=True, blank = True )
	def __str__(self):
		return self.partNumber.name

class QtyReason(models.Model):
	reason = models.CharField(max_length = 10, default = "purchasing")
	def __str__(self):
		return self.reason


class pnQty(models.Model):
	partNumber = models.ForeignKey(partNumber, on_delete = models.CASCADE, blank = True, null =True)
	Qty = models.IntegerField(default=0)
	reason = models.ForeignKey(QtyReason, on_delete = models.CASCADE, blank = True, null =True)
	user = models.ForeignKey(User, on_delete = models.SET_NULL, null= True, blank = True)
	date = models.DateField(null=True, blank = True )

class planerElement(models.Model):
	user = models.ForeignKey(User, on_delete = models.SET_NULL, null= True, blank = True)
	product = models.ForeignKey(partNumber, on_delete = models.CASCADE, blank = True, null =True)
	produceQty = models.IntegerField(default=1)

	def __str__(self):
		return self.user.username







	

